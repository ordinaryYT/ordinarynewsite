<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fortnite Lobby Bot Creator</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f2f2f2; }
    .section { background: white; padding: 20px; margin-bottom: 20px; border-radius: 10px; }
    .bot { margin: 5px 0; }
    .mod-dashboard, .user-dashboard { display: none; }
    .btn { padding: 8px 12px; margin-top: 10px; cursor: pointer; }
  </style>
</head>
<body>

  <h1>Fortnite Lobby Bot Creator</h1>

  <!-- User Login -->
  <div class="section">
    <label>Username: <input type="text" id="userNameInput"></label>
    <button onclick="login()">Login</button>
  </div>

  <!-- User Dashboard -->
  <div class="section user-dashboard" id="userDashboard">
    <h2>Welcome, <span id="userName"></span></h2>
    <p>Points: <span id="points">0</span></p>
    <p>You may create up to 2 private bots. Each costs 250 points.</p>

    <div id="botList"></div>

    <h3>Create New Bot</h3>
    <input type="text" id="botUsername" placeholder="Bot Username">
    <select id="preset">
      <option value="preset1">Preset 1</option>
      <option value="preset2">Preset 2</option>
      <option value="preset3">Preset 3</option>
    </select>
    <button class="btn" onclick="createBot()">Create Bot</button>
  </div>

  <!-- Mod Dashboard -->
  <div class="section mod-dashboard" id="modDashboard">
    <h2>Moderator Dashboard</h2>
    <div id="pendingBots"></div>
  </div>

  <!-- Public Bots -->
  <div class="section">
    <h2>75 Public Bots</h2>
    <div id="publicBots"></div>
  </div>

  <script>
    let user = null;
    let userPoints = 0;
    let userBots = [];
    let allBots = [];
    let interval;

    const publicBots = Array.from({ length: 75 }, (_, i) => `OGsbot${i + 1}`);
    const mods = ["admin"]; // You can change/add mod usernames here

    function saveUserData() {
      localStorage.setItem(`points_${user}`, userPoints);
      localStorage.setItem(`bots_${user}`, JSON.stringify(userBots));
      localStorage.setItem(`allBots`, JSON.stringify(allBots));
    }

    function loadUserData() {
      const savedPoints = localStorage.getItem(`points_${user}`);
      const savedBots = localStorage.getItem(`bots_${user}`);
      const savedAll = localStorage.getItem(`allBots`);

      if (savedPoints) userPoints = parseInt(savedPoints);
      if (savedAll) allBots = JSON.parse(savedAll);
      if (savedBots) userBots = JSON.parse(savedBots);
      else userBots = allBots.filter(bot => bot.owner === user);
    }

    function login() {
      const name = document.getElementById('userNameInput').value.trim();
      if (!name) return alert("Enter username.");
      user = name;

      document.getElementById('userName').textContent = user;
      document.querySelector('.user-dashboard').style.display = 'block';

      if (mods.includes(user)) {
        document.querySelector('.mod-dashboard').style.display = 'block';
      }

      loadUserData();
      updateUI();

      if (interval) clearInterval(interval);
      interval = setInterval(() => {
        userPoints += 3;
        saveUserData();
        updateUI();
      }, 60000);

      // Show immediate update without waiting a minute
      updateUI();
    }

    function createBot() {
      if (userBots.length >= 2) return alert("Max 2 private bots.");
      if (userPoints < 250) return alert("Not enough points.");
      const botName = document.getElementById('botUsername').value.trim();
      const preset = document.getElementById('preset').value;

      if (!botName) return alert("Enter a bot username.");

      userPoints -= 250;
      const bot = {
        owner: user,
        name: botName,
        preset,
        status: "being_created"
      };
      allBots.push(bot);
      userBots.push(bot);
      saveUserData();
      updateUI();
    }

    function approveBot(index) {
      allBots[index].status = "created";
      saveUserData();
      updateUI();
    }

    function updateUI() {
      document.getElementById('points').textContent = userPoints;

      // User Bot List
      const botList = document.getElementById('botList');
      botList.innerHTML = `<h4>Your Bots</h4>`;
      userBots = allBots.filter(bot => bot.owner === user);
      userBots.forEach(bot => {
        botList.innerHTML += `<div class="bot">${bot.name} - ${bot.status === "being_created" ? "Bot being created" : "Bot created"} (${bot.preset})</div>`;
      });

      // Mod View
      if (mods.includes(user)) {
        const pending = document.getElementById('pendingBots');
        pending.innerHTML = `<h3>Pending Bots</h3>`;
        allBots.forEach((bot, index) => {
          if (bot.status === "being_created") {
            pending.innerHTML += `<div>${bot.name} by ${bot.owner} [${bot.preset}]
              <button onclick="approveBot(${index})">Approve</button></div>`;
          }
        });
      }

      // Public Bots
      const pubBots = document.getElementById('publicBots');
      pubBots.innerHTML = publicBots.map(bot => `<div>${bot}</div>`).join('');
    }

    // Load public bots on initial page load
    window.onload = function () {
      const pubBots = document.getElementById('publicBots');
      pubBots.innerHTML = publicBots.map(bot => `<div>${bot}</div>`).join('');
    };
  </script>
</body>
</html>
